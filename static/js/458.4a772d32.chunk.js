(self.webpackChunkreact_deploy=self.webpackChunkreact_deploy||[]).push([[458],{2119:function(e){e.exports={BASE_URL:"https://sinalacare-api.neonauby.com/api/v1"}},1458:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return j}});var s=n(9439),t=n(2791),i=n(7689),o=n(4554),r=n(890),l=n(2256),c=n(5294),d=n(7559),u=n.n(d),m=n(2119),p=n.n(m),f=(n(1842),n(1413)),h=n(184);var b=function(e){var a,n=e.label,i=e.idx,o=e.refCheckBoxJawaban,r=e.refSetCheckBoxJawaban,l=e.idxSoal,c=e.opsi,d=e.soal,u=(0,t.useState)(!1),m=(0,s.Z)(u,2),p=(m[0],m[1]),b=(0,t.useState)(!1),x=(0,s.Z)(b,2),g=x[0],j=x[1],_=(0,t.useState)({}),w=(0,s.Z)(_,2),v=w[0],k=w[1],y=(0,t.useState)([]),Z=(0,s.Z)(y,2),S=(Z[0],Z[1]),N=(0,t.useState)(""!=o[l].jawaban[i]),E=(0,s.Z)(N,2),C=E[0],A=E[1];return(0,t.useEffect)((function(){if(o[l].nested_jawaban){var e,a=Object.keys(null===(e=o[l])||void 0===e?void 0:e.nested_jawaban).map((function(e){return o[l].nested_jawaban[e]}));""!=a.jawaban&&(S(a),d.assesment_mapping_assesment_mapping_parent_assesment_idToassesment.forEach((function(e){var n;if(a[i].id==(null===e||void 0===e||null===(n=e.assesment_assesment_mapping_assesment_idToassesment)||void 0===n?void 0:n.id)){var s=(0,f.Z)((0,f.Z)({},e.assesment_assesment_mapping_assesment_idToassesment),{},{parent_id:e.parent_assesment_id,opsi_jawaban:e.opsi,opsi_jawaban_index:i});k(s),j(!0)}})))}}),[]),(0,t.useEffect)((function(){if(o[l].nested_jawaban){var e,a=Object.keys(null===(e=o[l])||void 0===e?void 0:e.nested_jawaban).map((function(e){return o[l].nested_jawaban[e]}));""!=a.jawaban&&(S(a),d.assesment_mapping_assesment_mapping_parent_assesment_idToassesment.forEach((function(e){var n;if(a[i].id==(null===e||void 0===e||null===(n=e.assesment_assesment_mapping_assesment_idToassesment)||void 0===n?void 0:n.id)){var s=(0,f.Z)((0,f.Z)({},e.assesment_assesment_mapping_assesment_idToassesment),{},{parent_id:e.parent_assesment_id,opsi_jawaban:e.opsi,opsi_jawaban_index:i});k(s),j(!0)}})))}}),[C]),(0,h.jsx)("div",{className:"flex items-center",children:(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("input",{checked:C,onChange:function(e){!function(e){if(e){var a=o;a[l].jawaban[i]=c,r(a)}else{var n=o;n[l].jawaban[i]="",n[l].nested_jawaban&&(n[l].nested_jawaban[v.id].jawaban=""),r(n)}A((function(e){return!e}))}(e.target.checked)},id:"checked-checkbox-"+i,type:"checkbox",value:C,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,h.jsx)("label",{htmlFor:"checked-checkbox-"+i,className:"ml-2 text-md font-large text-gray-900",children:n})]}),g&&(0,h.jsx)("div",{className:"pl-10 pt-1",children:null===v||void 0===v||null===(a=v.assesment_opsi)||void 0===a?void 0:a.map((function(e,a){return(0,h.jsx)("div",{className:"flex items-center",children:(0,h.jsx)("div",{className:"flex flex-col",children:(0,h.jsxs)("div",{children:[(0,h.jsx)("input",{checked:o[l].nested_jawaban[v.id].jawaban===e.key_opsi,onChange:function(e){!function(e,a){console.log("FIRE");var n=o;n[v.parent_id].jawaban[i]=c,n[l].nested_jawaban[a].jawaban=e.target.value,r(n),A(!0)}(e,v.id),p((function(e){return!e}))},id:"checked-checkbox-"+"".concat(e.key_opsi,"-").concat(v.id),name:"opsi_nested_"+v.id,type:"radio",value:e.key_opsi,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,h.jsx)("label",{htmlFor:"checked-checkbox-"+"".concat(e.key_opsi,"-").concat(v.id),className:"ml-2 text-md font-large text-gray-900 cursor-pointer",children:e.label_opsi})]})})},e.key_opsi)}))})]})})},x=n(9536);var g={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function j(){var e,a=t.useState(!1),n=(0,s.Z)(a,2),d=n[0],m=n[1],f=t.useState(!1),j=(0,s.Z)(f,2),_=j[0],w=j[1],v=t.useState(!1),k=(0,s.Z)(v,2),y=k[0],Z=k[1],S=(0,i.s0)(),N=(0,t.useState)({}),E=(0,s.Z)(N,2),C=E[0],A=E[1],T=(0,t.useState)({}),B=(0,s.Z)(T,2),F=(B[0],B[1],(0,t.useState)({})),O=(0,s.Z)(F,2),U=O[0],R=(O[1],(0,t.useState)(null)),L=(0,s.Z)(R,2),z=(L[0],L[1]),D=(0,t.useState)([]),J=(0,s.Z)(D,2),I=J[0],K=J[1],M=(0,t.useState)(0),P=(0,s.Z)(M,2),Y=P[0],q=P[1],G=(0,t.useState)(I[Y]),H=(0,s.Z)(G,2),Q=H[0],V=H[1],W=(0,t.useState)("Selanjutnya"),X=(0,s.Z)(W,2),$=(X[0],X[1]),ee=(0,t.useState)(0),ae=(0,s.Z)(ee,2),ne=(ae[0],ae[1],(0,t.useState)(0)),se=(0,s.Z)(ne,2),te=(se[0],se[1],(0,t.useState)({})),ie=(0,s.Z)(te,2),oe=ie[0],re=ie[1],le=(0,t.useState)(I.length),ce=(0,s.Z)(le,2),de=(ce[0],ce[1]),ue=(0,t.useState)(0),me=(0,s.Z)(ue,2),pe=(me[0],me[1]),fe=(0,t.useState)((100*(Y+1/I.length)).toFixed(0)),he=(0,s.Z)(fe,2),be=(he[0],he[1]),xe=(0,t.useState)(0),ge=(0,s.Z)(xe,2),je=(ge[0],ge[1]),_e=(0,t.useState)(""),we=(0,s.Z)(_e,2),ve=we[0],ke=we[1],ye=(0,i.UO)().studiKasus;function Ze(e,a,n){var s=oe;s[e].jawaban=a,re.bind(this,s),z(n)}return(0,t.useEffect)((function(){je()}),[oe]),(0,t.useEffect)((function(){Y==I.length-1?$("Selesai"):$("Selanjutnya")}),[U]),(0,t.useEffect)((function(){Y==I.length-1?$("Selesai"):$("Selanjutnya")}),[Y]),(0,t.useEffect)((function(){var e=u().getToken();c.Z.get("".concat(p().BASE_URL,"/assesment/").concat(ye,"/soal"),{headers:{Authorization:"Bearer "+e}}).then((function(e){var a=e.data.data,n={},s={};a.forEach((function(e,a){var t={id:e.id,jawaban:""};e.assesment_mapping_assesment_mapping_parent_assesment_idToassesment.length>0&&(t.nested_jawaban={},e.assesment_mapping_assesment_mapping_parent_assesment_idToassesment.forEach((function(e){t.nested_jawaban[e.assesment_assesment_mapping_assesment_idToassesment.id]={id:e.assesment_assesment_mapping_assesment_idToassesment.id,opsi:e.opsi,jawaban:""},s[e.assesment_assesment_mapping_assesment_idToassesment.id]=e.assesment_assesment_mapping_assesment_idToassesment}))),"multi_opsi"==e.tipe_soal&&(t.jawaban=Array(e.assesment_opsi.length).fill("")),n[e.id]=t})),re(n),K(a),be(0/a.length),de(a.length),V(a[0]),q(0)})).catch((function(e){console.error(e)})),c.Z.get("".concat(p().BASE_URL,"/profile-mahasiswa"),{headers:{Authorization:"Bearer "+e}}).then((function(e){var a=e.data.data;A(a)})).catch((function(e){console.error(e)})),c.Z.get("".concat(p().BASE_URL,"/studi_kasus/").concat(ye,"/header"),{headers:{Authorization:"Bearer "+e}}).then((function(e){var a,n=e.data.data;ke((a=n.nama).charAt(0).toUpperCase()+a.slice(1))})).catch((function(e){console.error(e)}))}),[]),(0,t.useEffect)((function(){}),[Y]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("section",{className:"absolute top-0 w-full h-screen bg-slate-100",children:[(0,h.jsxs)("div",{className:"py-6 bg-gray-900 text-center text-white",children:["Assesment ",ve]}),(0,h.jsxs)("div",{className:"w-full flex flex-col sm:flex-row flex-grow overflow-hidden bg-blue-500",children:[(0,h.jsx)("main",{role:"main",className:"w-full flex-grow p-4 overflow-auto bg-slate-100 text-gray-700",children:(0,h.jsxs)("div",{className:"h-full w-full bg-white p-6 rounded text-lg max-h-[80vh] flex flex-col space-y-5 overflow-y-auto",children:[Y!=I.length-1&&(0,h.jsx)("div",{className:"w-full flex justify-end",children:(0,h.jsx)("button",{className:"w-[240px]justify-end text-center bg-blue-500 hover:bg-slate-200 text-white hover:text-gray-600 border-1 border-neutral-700 hover:border-neutral-500 font-bold py-2 px-4 rounded inline-flex items-center",type:"button",onClick:function(){var e=Y+1;e<I.length&&(q(e),V(I[e]),pe(e+1),be(((e+1)/I.length*100).toFixed(2)),e==I.length-1&&$("Selesai"))},children:(0,h.jsx)("span",{className:"text-center w-full",children:"Selanjutnya"})})}),(0,h.jsx)("div",{className:"underline",children:null===Q||void 0===Q?void 0:Q.pertanyaan}),(0,h.jsx)("div",{children:null===Q||void 0===Q?void 0:Q.deskripsi}),null===Q||void 0===Q?void 0:Q.assesment_opsi.map((function(e,a){return"multi_opsi"==Q.tipe_soal?(0,h.jsx)(b,{opsi:e.key_opsi,idx:a,label:e.label_opsi,refCheckBoxJawaban:oe,refSetCheckBoxJawaban:re,idxSoal:Q.id,soal:Q},"".concat(e.key_opsi,"-").concat(Q.id)):(0,h.jsx)("div",{className:"flex items-center",children:(0,h.jsx)("div",{className:"flex flex-col",children:(0,h.jsxs)("div",{children:[(0,h.jsx)("input",{checked:oe[Q.id].jawaban===e.key_opsi,onChange:function(n){Ze(Q.id,e.key_opsi,a)},id:"checked-checkbox-"+"".concat(e.key_opsi,"-").concat(Q.id),name:"opsi",type:"radio",value:e.key_opsi,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,h.jsx)("label",{htmlFor:"checked-checkbox-"+"".concat(e.key_opsi,"-").concat(Q.id),className:"ml-2 text-md font-large text-gray-900 cursor-pointer",onClick:function(){Ze(Q.id,e.key_opsi,a)},children:e.label_opsi})]})})},e.key_opsi)}))]})}),(0,h.jsx)("div",{className:"sm:w-1/3 md:1/4 w-full flex-shrink flex-grow-0 p-4 bg-slate-100",children:(0,h.jsxs)("div",{className:"sticky p-4 w-full rounded bg-white h-[80vh] text-gray-700 flex flex-col justify-between",children:[(0,h.jsx)("div",{className:"grid grid-cols-4 gap-2",children:null===I||void 0===I?void 0:I.map((function(e,a){var n=e.id,s=e.pertanyaan;e.tipe_soal;var t="";if(oe[n].jawaban&&"string"==typeof oe[n].jawaban&&""!=oe[n].jawaban)t=" bg-green-500 text-white";else if(oe[n].jawaban&&"object"==typeof oe[n].jawaban){Object.keys(oe[n].jawaban).map((function(e){return oe[n].jawaban[e]})).forEach((function(e,a){""!=e&&(t=" bg-green-500 text-white")}))}return a==Y&&(t=" bg-purple-500 text-white"),(0,h.jsx)("button",{className:"w-14 h-14 p-4 border-4"+t,onClick:function(){V(I[a]),q(a),re(oe)},children:a+1},n)}))}),(0,h.jsx)("button",{className:"text-center bg-red-500 hover:bg-slate-200 text-white hover:text-gray-600 border-1 border-neutral-700 hover:border-neutral-500 font-bold py-2 px-4 rounded inline-flex items-center",type:"button",onClick:function(){w(!0)},children:(0,h.jsx)("span",{className:"text-center w-full",children:"Akhiri Ujian"})})]})})]})]}),(0,h.jsx)("section",{className:"absolute top-0 right-0 p-4 text-white",id:"header-mahasiswa",children:(0,h.jsxs)("div",{className:"flex justify-end",children:[(0,h.jsxs)("div",{className:"pr-5",children:[(0,h.jsx)("p",{children:C.nama}),(0,h.jsx)("p",{children:C.nim})]}),(0,h.jsx)("img",{alt:"Avatar Mahasiswa",src:null!==(e=null===C||void 0===C?void 0:C.imageUrl)&&void 0!==e?e:"https://ui-avatars.com/api/?background=random&name=Avatar",className:"img-avatar-kasus rounded-full h-[45px]"})]})}),(0,h.jsx)(x.Z,{openDialog:_,setOpenDialog:w,confirmCallback:function(){var e=[];Object.keys(oe).map((function(e){return oe[e]})).forEach((function(a,n){if("string"==typeof a.jawaban&&""!=a.jawaban)e.push({id:a.id,jawaban:a.jawaban});else if("object"==typeof a.jawaban){var s=Object.keys(a.jawaban).map((function(e){return a.jawaban[e]})),t=[];s.forEach((function(e,a){""!=e&&t.push(e)}));var i=t.join(",");""!=i&&e.push({id:a.id,jawaban:i})}a.nested_jawaban&&Object.keys(a.nested_jawaban).map((function(e){return a.nested_jawaban[e]})).forEach((function(a,n){""!=a.jawaban&&e.push({id:a.id,jawaban:a.jawaban})}))})),c.Z.post("".concat(p().BASE_URL,"/assesment/").concat(ye,"/submit"),{jawaban:e},{headers:{Authorization:"Bearer "+u().getToken()}}).then((function(e){Z(e.data.data.nilai),m(!0)})).catch((function(e){m(!0)}))},message:"Apakah anda yakin untuk mengakhiri ujian ini ?"}),(0,h.jsx)(l.Z,{open:d,onClose:function(){S("/studi-kasus/".concat(ye))},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,h.jsxs)(o.Z,{sx:g,children:[(0,h.jsx)(r.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Terima kasih"}),(0,h.jsxs)(r.Z,{id:"modal-modal-description",sx:{mt:2},children:["Nilai anda : ",y]})]})})]})}},9536:function(e,a,n){"use strict";n.d(a,{Z:function(){return u}});var s=n(2791),t=n(4294),i=n(5289),o=n(7123),r=n(9157),l=n(1691),c=n(5661),d=n(184);function u(e){var a=e.openDialog,n=e.setOpenDialog,u=e.confirmCallback,m=e.message,p=function(){n(!1)};return(0,d.jsx)(s.Fragment,{children:(0,d.jsxs)(i.Z,{open:a,onClose:p,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,d.jsx)(c.Z,{id:"alert-dialog-title",children:"Perhatian!"}),(0,d.jsx)(r.Z,{children:(0,d.jsx)(l.Z,{id:"alert-dialog-description",children:m})}),(0,d.jsxs)(o.Z,{children:[(0,d.jsx)(t.Z,{onClick:u,children:"Ya"}),(0,d.jsx)(t.Z,{onClick:p,autoFocus:!0,children:"Batal"})]})]})})}}}]);
//# sourceMappingURL=458.4a772d32.chunk.js.map