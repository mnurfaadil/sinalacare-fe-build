(self.webpackChunkreact_deploy=self.webpackChunkreact_deploy||[]).push([[458],{2119:function(e){e.exports={BASE_URL:"https://sinalacare-api.neonauby.com/api/v1"}},1458:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return g}});var s=n(9439),t=n(2791),i=n(7689),o=n(4554),l=n(890),r=n(2256),c=n(5294),d=n(7559),u=n.n(d),m=n(2119),p=n.n(m),f=(n(1842),n(1413)),b=n(184);var h=function(e){var a,n=e.label,i=e.idx,o=e.refCheckBoxJawaban,l=e.refSetCheckBoxJawaban,r=e.idxSoal,c=e.opsi,d=e.soal,u=(0,t.useState)(!1),m=(0,s.Z)(u,2),p=m[0],h=m[1],_=(0,t.useState)({}),g=(0,s.Z)(_,2),x=g[0],j=g[1],w=(0,t.useState)([]),v=(0,s.Z)(w,2),k=v[0],y=v[1],S=(0,t.useState)(""!=o[r].jawaban[i]),Z=(0,s.Z)(S,2),N=Z[0],E=Z[1];return(0,t.useEffect)((function(){if(o[r].nested_jawaban){var e,a=Object.keys(null===(e=o[r])||void 0===e?void 0:e.nested_jawaban).map((function(e){return o[r].nested_jawaban[e]}));""!=a.jawaban&&(y(a),d.assesment_mapping_assesment_mapping_parent_assesment_idToassesment.forEach((function(e){var n;if(a[i].id==(null===e||void 0===e||null===(n=e.assesment_assesment_mapping_assesment_idToassesment)||void 0===n?void 0:n.id)){var s=(0,f.Z)((0,f.Z)({},e.assesment_assesment_mapping_assesment_idToassesment),{},{opsi_jawaban:e.opsi,opsi_jawaban_index:i});j(s),h(!0)}})))}}),[]),(0,t.useEffect)((function(){if(o[r].nested_jawaban){var e,a=Object.keys(null===(e=o[r])||void 0===e?void 0:e.nested_jawaban).map((function(e){return o[r].nested_jawaban[e]}));""!=a.jawaban&&(y(a),d.assesment_mapping_assesment_mapping_parent_assesment_idToassesment.forEach((function(e){var n;if(a[i].id==(null===e||void 0===e||null===(n=e.assesment_assesment_mapping_assesment_idToassesment)||void 0===n?void 0:n.id)){var s=(0,f.Z)((0,f.Z)({},e.assesment_assesment_mapping_assesment_idToassesment),{},{opsi_jawaban:e.opsi,opsi_jawaban_index:i});j(s),h(!0)}})))}}),[N]),(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{defaultChecked:N,onChange:function(e){!function(e){if(e){var a=o;a[r].jawaban[i]=c,l(a)}else{var n=o;n[r].jawaban[i]="",n[r].nested_jawaban&&(n[r].nested_jawaban[x.id].jawaban=""),l(n)}E((function(e){return!e}))}(e.target.checked)},id:"checked-checkbox-"+i,type:"checkbox",value:N,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,b.jsx)("label",{htmlFor:"checked-checkbox-"+i,className:"ml-2 text-md font-large text-gray-900",children:n})]}),p&&(0,b.jsx)("div",{className:"pl-10 pt-1",children:null===x||void 0===x||null===(a=x.assesment_opsi)||void 0===a?void 0:a.map((function(e,a){return console.log("refChildJawaban[i]"),console.log(k[a]),console.log(o[r].nested_jawaban),console.log(o[r].nested_jawaban[x.id]),console.log(o[r].nested_jawaban[x.id].jawaban),console.log(o[r].nested_jawaban[x.id].jawaban===e.key_opsi),(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)("div",{className:"flex flex-col",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{checked:o[r].nested_jawaban[x.id].jawaban===e.key_opsi,defaultChecked:o[r].nested_jawaban[x.id].jawaban==e.key_opsi,onChange:function(e){!function(e,a){var n=o;n[r].nested_jawaban[a].jawaban=e.target.value,l(n),console.log("FIRE"),console.log(n[r].nested_jawaban[a]),j(x)}(e,x.id)},id:"checked-checkbox-"+"".concat(e.key_opsi,"-").concat(x.id),name:"opsi_nested_"+x.id,type:"radio",value:e.key_opsi,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,b.jsx)("label",{htmlFor:"checked-checkbox-"+"".concat(e.key_opsi,"-").concat(x.id),className:"ml-2 text-md font-large text-gray-900 cursor-pointer",onClick:function(){},children:e.label_opsi})]})})},e.key_opsi)}))})]})})};var _={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function g(){var e,a=t.useState(!1),n=(0,s.Z)(a,2),d=n[0],m=n[1],f=t.useState(!1),g=(0,s.Z)(f,2),x=g[0],j=g[1],w=(0,i.s0)(),v=(0,t.useState)({}),k=(0,s.Z)(v,2),y=k[0],S=k[1],Z=(0,t.useState)({}),N=(0,s.Z)(Z,2),E=(N[0],N[1],(0,t.useState)({})),C=(0,s.Z)(E,2),T=C[0],A=(C[1],(0,t.useState)(null)),B=(0,s.Z)(A,2),U=B[0],F=B[1],J=(0,t.useState)([]),O=(0,s.Z)(J,2),R=O[0],L=O[1],z=(0,t.useState)(0),K=(0,s.Z)(z,2),I=K[0],M=K[1],q=(0,t.useState)(R[I]),D=(0,s.Z)(q,2),G=D[0],H=D[1],P=(0,t.useState)("Selanjutnya"),Q=(0,s.Z)(P,2),V=(Q[0],Q[1]),W=(0,t.useState)(0),X=(0,s.Z)(W,2),Y=(X[0],X[1],(0,t.useState)(0)),$=(0,s.Z)(Y,2),ee=($[0],$[1],(0,t.useState)({})),ae=(0,s.Z)(ee,2),ne=ae[0],se=ae[1],te=(0,t.useState)(R.length),ie=(0,s.Z)(te,2),oe=(ie[0],ie[1]),le=(0,t.useState)(0),re=(0,s.Z)(le,2),ce=(re[0],re[1]),de=(0,t.useState)((100*(I+1/R.length)).toFixed(0)),ue=(0,s.Z)(de,2),me=(ue[0],ue[1]),pe=(0,t.useState)(0),fe=(0,s.Z)(pe,2),be=(fe[0],fe[1]),he=(0,t.useState)(""),_e=(0,s.Z)(he,2),ge=_e[0],xe=_e[1],je=(0,i.UO)().studiKasus;function we(e,a,n){var s=ne;s[e].jawaban=a,se.bind(this,s),F(n)}return(0,t.useEffect)((function(){be()}),[ne]),(0,t.useEffect)((function(){I==R.length-1?V("Selesai"):V("Selanjutnya")}),[T]),(0,t.useEffect)((function(){I==R.length-1?V("Selesai"):V("Selanjutnya")}),[I]),(0,t.useEffect)((function(){G&&G.assesment_mapping_assesment_mapping_parent_assesment_idToassesment&&G.assesment_mapping_assesment_mapping_parent_assesment_idToassesment.length>0&&G.assesment_mapping_assesment_mapping_parent_assesment_idToassesment.forEach((function(e){console.log(e)}))}),[U]),(0,t.useEffect)((function(){var e=u().getToken();c.Z.get("".concat(p().BASE_URL,"/assesment/").concat(je,"/soal"),{headers:{Authorization:"Bearer "+e}}).then((function(e){var a=e.data.data,n={},s={};a.forEach((function(e,a){var t={id:e.id,jawaban:""};e.assesment_mapping_assesment_mapping_parent_assesment_idToassesment.length>0&&(t.nested_jawaban={},e.assesment_mapping_assesment_mapping_parent_assesment_idToassesment.forEach((function(e){t.nested_jawaban[e.assesment_assesment_mapping_assesment_idToassesment.id]={id:e.assesment_assesment_mapping_assesment_idToassesment.id,opsi:e.opsi,jawaban:""},s[e.assesment_assesment_mapping_assesment_idToassesment.id]=e.assesment_assesment_mapping_assesment_idToassesment}))),"multi_opsi"==e.tipe_soal&&(t.jawaban=Array(e.assesment_opsi.length).fill("")),n[e.id]=t})),se(n),L(a),me(0/a.length),oe(a.length),H(a[0]),M(0)})).catch((function(e){console.error(e)})),c.Z.get("".concat(p().BASE_URL,"/profile-mahasiswa"),{headers:{Authorization:"Bearer "+e}}).then((function(e){var a=e.data.data;S(a)})).catch((function(e){console.error(e)})),c.Z.get("".concat(p().BASE_URL,"/studi_kasus/").concat(je,"/header"),{headers:{Authorization:"Bearer "+e}}).then((function(e){var a,n=e.data.data;xe((a=n.nama).charAt(0).toUpperCase()+a.slice(1))})).catch((function(e){console.error(e)}))}),[]),(0,t.useEffect)((function(){}),[I]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("section",{className:"absolute top-0 w-full h-screen bg-slate-100",children:[(0,b.jsxs)("div",{className:"py-6 bg-gray-900 text-center text-white",children:["Assesment ",ge]}),(0,b.jsxs)("div",{className:"w-full flex flex-col sm:flex-row flex-grow overflow-hidden bg-blue-500",children:[(0,b.jsx)("main",{role:"main",className:"w-full flex-grow p-4 overflow-auto bg-slate-100 text-gray-700",children:(0,b.jsxs)("div",{className:"h-full w-full bg-white p-6 rounded text-lg max-h-[80vh] flex flex-col space-y-5 overflow-y-auto",children:[I!=R.length-1&&(0,b.jsx)("div",{className:"w-full flex justify-end",children:(0,b.jsx)("button",{className:"w-[240px]justify-end text-center bg-blue-500 hover:bg-slate-200 text-white hover:text-gray-600 border-1 border-neutral-700 hover:border-neutral-500 font-bold py-2 px-4 rounded inline-flex items-center",type:"button",onClick:function(){var e=I+1;e<R.length&&(M(e),H(R[e]),ce(e+1),me(((e+1)/R.length*100).toFixed(2)),e==R.length-1&&V("Selesai"))},children:(0,b.jsx)("span",{className:"text-center w-full",children:"Selanjutnya"})})}),(0,b.jsx)("div",{className:"underline",children:null===G||void 0===G?void 0:G.pertanyaan}),(0,b.jsx)("div",{children:null===G||void 0===G?void 0:G.deskripsi}),null===G||void 0===G?void 0:G.assesment_opsi.map((function(e,a){return"multi_opsi"==G.tipe_soal?(0,b.jsx)(h,{opsi:e.key_opsi,idx:a,label:e.label_opsi,refCheckBoxJawaban:ne,refSetCheckBoxJawaban:se,idxSoal:G.id,soal:G},"".concat(e.key_opsi,"-").concat(G.id)):(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)("div",{className:"flex flex-col",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{checked:ne[G.id].jawaban===e.key_opsi,onChange:function(n){we(G.id,e.key_opsi,a)},id:"checked-checkbox-"+"".concat(e.key_opsi,"-").concat(G.id),name:"opsi",type:"radio",value:e.key_opsi,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,b.jsx)("label",{htmlFor:"checked-checkbox-"+"".concat(e.key_opsi,"-").concat(G.id),className:"ml-2 text-md font-large text-gray-900 cursor-pointer",onClick:function(){we(G.id,e.key_opsi,a)},children:e.label_opsi})]})})},e.key_opsi)}))]})}),(0,b.jsx)("div",{className:"sm:w-1/3 md:1/4 w-full flex-shrink flex-grow-0 p-4 bg-slate-100",children:(0,b.jsxs)("div",{className:"sticky p-4 w-full rounded bg-white h-[80vh] text-gray-700 flex flex-col justify-between",children:[(0,b.jsx)("div",{className:"grid grid-cols-4 gap-2",children:null===R||void 0===R?void 0:R.map((function(e,a){var n=e.id,s=e.pertanyaan;e.tipe_soal;var t="";if(console.log("====== checkBoxJawaban[id]"),console.log(ne[n]),console.log(typeof ne[n].jawaban),ne[n].jawaban&&"string"==typeof ne[n].jawaban&&""!=ne[n].jawaban)t=" bg-green-500 text-white";else if(ne[n].jawaban&&"object"==typeof ne[n].jawaban){Object.keys(ne[n].jawaban).map((function(e){return ne[n].jawaban[e]})).forEach((function(e,a){""!=e&&(t=" bg-green-500 text-white")}))}return a==I&&(t=" bg-purple-500 text-white"),(0,b.jsx)("button",{className:"w-14 h-14 p-4 border-4"+t,onClick:function(){H(R[a]),M(a),se(ne)},children:a+1},n)}))}),(0,b.jsx)("button",{className:"text-center bg-red-500 hover:bg-slate-200 text-white hover:text-gray-600 border-1 border-neutral-700 hover:border-neutral-500 font-bold py-2 px-4 rounded inline-flex items-center",type:"button",onClick:function(){!function(){var e=[];console.log(ne),Object.keys(ne).map((function(e){return ne[e]})).forEach((function(a,n){if("string"==typeof a.jawaban&&""!=a.jawaban)e.push({id:a.id,jawaban:a.jawaban});else if("object"==typeof a.jawaban){var s=Object.keys(a.jawaban).map((function(e){return a.jawaban[e]})),t=[];s.forEach((function(e,a){""!=e&&t.push(e)}));var i=t.join(",");""!=i&&e.push({id:a.id,jawaban:i})}a.nested_jawaban&&Object.keys(a.nested_jawaban).map((function(e){return a.nested_jawaban[e]})).forEach((function(a,n){""!=a.jawaban&&e.push({id:a.id,jawaban:a.jawaban})}))})),0==e.length&&alert("Jawaban Kosong"),c.Z.post("".concat(p().BASE_URL,"/assesment/").concat(je,"/submit"),{jawaban:e},{headers:{Authorization:"Bearer "+u().getToken()}}).then((function(e){j(e.data.data.nilai),m(!0)})).catch((function(e){m(!0)}))}()},children:(0,b.jsx)("span",{className:"text-center w-full",children:"Akhiri Ujian"})})]})})]})]}),(0,b.jsx)("section",{className:"absolute top-0 right-0 p-4 text-white",id:"header-mahasiswa",children:(0,b.jsxs)("div",{className:"flex justify-end",children:[(0,b.jsxs)("div",{className:"pr-5",children:[(0,b.jsx)("p",{children:y.nama}),(0,b.jsx)("p",{children:y.nim})]}),(0,b.jsx)("img",{alt:"Avatar Mahasiswa",src:null!==(e=null===y||void 0===y?void 0:y.imageUrl)&&void 0!==e?e:"https://ui-avatars.com/api/?background=random&name=Avatar",className:"img-avatar-kasus rounded-full h-[45px]"})]})}),(0,b.jsx)(r.Z,{open:d,onClose:function(){w("/studi-kasus/".concat(je))},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,b.jsxs)(o.Z,{sx:_,children:[(0,b.jsx)(l.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Terima kasih"}),(0,b.jsxs)(l.Z,{id:"modal-modal-description",sx:{mt:2},children:["Nilai anda : ",x]})]})})]})}}}]);
//# sourceMappingURL=458.010d73b4.chunk.js.map